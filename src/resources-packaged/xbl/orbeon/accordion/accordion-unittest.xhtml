<!--
  Copyright (C) 2009 Orbeon, Inc.

  This program is free software; you can redistribute it and/or modify it under the terms of the
  GNU Lesser General Public License as published by the Free Software Foundation; either version
  2.1 of the License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;
  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  See the GNU Lesser General Public License for more details.

  The full text of the license is available at http://www.gnu.org/copyleft/lesser.html
  -->
<xh:html xmlns:xf="http://www.w3.org/2002/xforms"
    xmlns:f="http://orbeon.org/oxf/xml/formatting"
    xmlns:xh="http://www.w3.org/1999/xhtml"
    xmlns:xxf="http://orbeon.org/oxf/xml/xforms"
    xmlns:widget="http://orbeon.org/oxf/xml/widget"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:fr="http://orbeon.org/oxf/xml/form-runner">

    <xh:head>
        <xh:title>Accordion</xh:title>
        <xf:model>
            <xf:instance id="instance">
                <instance>
                    <cost>123.45</cost>
                    <states>
                        <state>
                            <abbreviation>CA</abbreviation>
                            <name>California</name>
                            <population>36553215</population>
                        </state>
                        <state>
                            <abbreviation>GA</abbreviation>
                            <name>Georgia</name>
                            <population>9544750</population>
                        </state>
                        <state>
                            <abbreviation>HI</abbreviation>
                            <name>Hawaii</name>
                            <population>1283388</population>
                        </state>
                    </states>
                </instance>
            </xf:instance>
            <xf:instance id="new-state">
                <state>
                    <abbreviation>AK</abbreviation>
                    <name>Alaska</name>
                    <population>686293</population>
                </state>
            </xf:instance>
        </xf:model>
        <xh:link type="text/css" rel="stylesheet" href="/ops/yui/logger/assets/logger.css"/>
        <xh:script type="text/javascript" src="/ops/yui/logger/logger.js"/>
        <xh:script type="text/javascript" src="/ops/yui/event-simulate/event-simulate.js"/>
        <xh:script type="text/javascript" src="/ops/yui/yuitest/yuitest.js"/>
        <xh:script type="text/javascript" src="/xbl/orbeon/accordion/accordion-unittest.js"/>
        <xh:style type="text/css">
            fieldset { float: left; margin-bottom: 1em; padding: 0 1em 0 0; }
            .xbl-fr-accordion { clear: both; }
        </xh:style>
    </xh:head>
    <xh:body>
        <xh:fieldset>
            <xh:legend>Accordion events</xh:legend>
            <xh:ol>
                <!-- Backward compatibility events -->
                <xh:li>
                    <xf:trigger appearance="minimal" id="open-all">
                        <xf:label>Open all (legacy)</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-accordion" name="fr-accordion-toggle-all">
                            <xf:property name="selected" value="true()"/>
                        </xf:dispatch>
                    </xf:trigger>
                </xh:li>
                <xh:li>
                    <xf:trigger appearance="minimal" id="close-all">
                        <xf:label>Close all (legacy)</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-accordion" name="fr-accordion-toggle-all">
                            <xf:property name="selected" value="false()"/>
                        </xf:dispatch>
                    </xf:trigger>
                </xh:li>
                <xh:li>
                    <xf:trigger appearance="minimal" id="open-third">
                        <xf:label>Open third (currency) section (legacy)</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-accordion" name="fr-accordion-toggle">
                            <xf:property name="case-id" value="'my-case-currency'"/>
                            <xf:property name="selected" value="true()"/>
                        </xf:dispatch>
                    </xf:trigger>
                </xh:li>
                <xh:li>
                    <xf:trigger appearance="minimal" id="close-third">
                        <xf:label>Close third (currency) section (legacy)</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-accordion" name="fr-accordion-toggle">
                            <xf:property name="case-id" value="'my-case-currency'"/>
                            <xf:property name="selected" value="false()"/>
                        </xf:dispatch>
                    </xf:trigger>
                </xh:li>
                <xh:li>
                    <xf:trigger appearance="minimal" id="open-states">
                        <xf:label>Open states (legacy)</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-accordion" name="fr-accordion-toggle">
                            <xf:property name="case-id" value="'my-case-repeat'"/>
                            <xf:property name="selected" value="true()"/>
                        </xf:dispatch>
                    </xf:trigger>
                </xh:li>
                <xh:li>
                    <xf:trigger appearance="minimal" id="close-states">
                        <xf:label>Close states (legacy)</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-accordion" name="fr-accordion-toggle">
                            <xf:property name="case-id" value="'my-case-repeat'"/>
                            <xf:property name="selected" value="false()"/>
                        </xf:dispatch>
                    </xf:trigger>
                </xh:li>
                <!-- New events -->
                <xh:li>
                    <xf:trigger appearance="minimal" id="open-all-new">
                        <xf:label>Open all</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-accordion" name="fr-show-all"/>
                    </xf:trigger>
                </xh:li>
                <xh:li>
                    <xf:trigger appearance="minimal" id="close-all-new">
                        <xf:label>Close all</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-accordion" name="fr-hide-all"/>
                    </xf:trigger>
                </xh:li>
                <xh:li>
                    <xf:trigger appearance="minimal" id="open-third-new">
                        <xf:label>Open third section (currency)</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-case-currency" name="fr-show"/>
                    </xf:trigger>
                </xh:li>
                <xh:li>
                    <xf:trigger appearance="minimal" id="close-third-new">
                        <xf:label>Close third section (currency)</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-case-currency" name="fr-hide"/>
                    </xf:trigger>
                </xh:li>
                <xh:li>
                    <xf:trigger appearance="minimal" id="open-states-new">
                        <xf:label>Open states</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-case-repeat" name="fr-show"/>
                    </xf:trigger>
                </xh:li>
                <xh:li>
                    <xf:trigger appearance="minimal" id="close-states-new">
                        <xf:label>Close states</xf:label>
                        <xf:dispatch ev:event="DOMActivate" targetid="my-case-repeat" name="fr-hide"/>
                    </xf:trigger>
                </xh:li>

                <xh:li>
                    <xf:trigger appearance="minimal" id="add-state">
                        <xf:label>Add state</xf:label>
                        <xf:insert ev:event="DOMActivate" context="instance('instance')/states" ref="state" at="last()" position="after" origin="instance('new-state')"/>
                    </xf:trigger>
                </xh:li>
                <xh:li>
                    <xf:trigger appearance="minimal" id="remove-state">
                        <xf:label>Remove state</xf:label>
                        <xf:delete ev:event="DOMActivate" ref="instance('instance')/states/state[last()]"/>
                    </xf:trigger>
                </xh:li>
            </xh:ol>
        </xh:fieldset>
        <fr:accordion class="fr-accordion-lnf" id="my-accordion">
            <fr:case>
                <fr:label>First section (lorem ipsum)</fr:label>
                <xh:div>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque eget nunc at felis pellentesque
                    consectetur malesuada mollis est. Sed ac dui a dui ultrices bibendum. In id nunc tortor, in porta
                    orci. Cras et eros odio, at fringilla neque. Mauris tincidunt pharetra tellus, eget molestie nisl
                    commodo vitae. Ut vel lectus nibh. Ut imperdiet ipsum interdum sem aliquet malesuada. Proin
                    tincidunt rhoncus dolor ut pulvinar. Pellentesque id libero massa. Fusce commodo volutpat felis.
                    Aliquam sit amet quam dolor, sit amet commodo sapien. Donec orci eros, sagittis id sodales in,
                    facilisis ac erat. Integer a odio sit amet dui pharetra posuere. Suspendisse placerat ornare
                    fermentum. Mauris eu nibh auctor velit imperdiet sagittis. Integer vel ornare tellus. Nulla
                    facilisi. Nullam eleifend dapibus enim a condimentum. Vestibulum porta lectus at enim iaculis
                    vehicula.
                </xh:div>
            </fr:case>
            <fr:case selected="true">
                <fr:label>Second section (XForms input)</fr:label>
                <xf:input ref="cost">
                    <xf:label>Cost</xf:label>
                </xf:input>
            </fr:case>
            <fr:case id="my-case-currency">
                <fr:label>Third section (currency)</fr:label>
                <fr:currency ref="cost" id="cost">
                    <xf:label>Cost</xf:label>
                </fr:currency>
            </fr:case>
            <xf:repeat ref="states/state">
                <fr:case id="my-case-repeat" selected="true">
                    <fr:label value="name"/>
                    <xh:ul>
                        <xh:li>
                            Abbreviation:
                            <xf:output value="abbreviation"/>
                        </xh:li>
                        <xh:li>
                            Population:
                            <xf:output value="population"/>
                        </xh:li>
                    </xh:ul>
                </fr:case>
            </xf:repeat>
        </fr:accordion>


        <xh:h2>Accordion with open-closes-others option</xh:h2>
        <fr:accordion open-closes-others="true" class="fr-accordion-lnf" id="open-closes-others-accordion">
            <fr:case>
                <fr:label>First</fr:label>
                First
            </fr:case>
            <fr:case>
                <fr:label>Second</fr:label>
                Second
            </fr:case>
        </fr:accordion>

    </xh:body>
</xh:html>
